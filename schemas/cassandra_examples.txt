
Информация по заказу
CREATE TABLE orders_by_id (
    order_id uuid,
    user_id text,
    geo_zone text,
    created_at timestamp,
    status text,
    total_amount decimal,
    PRIMARY KEY (order_id)
);

История заявок:
CREATE TABLE orders_by_user (
    user_id text,
    created_at timestamp,
    order_id uuid,
    status text,
    total_amount decimal,
    geo_zone text,
    PRIMARY KEY ((user_id, yyyymm), created_at, order_id)
) WITH CLUSTERING ORDER BY (created_at DESC);

Корзина
CREATE TABLE cart_by_owner (
    owner_key text,
    status text,
    created_at timestamp,
    updated_at timestamp,
    PRIMARY KEY (owner_key)
);

Товары корзины
CREATE TABLE cart_items_by_owner (
    owner_key text,
    product_id text,
    qty int,
    updated_at timestamp,
    PRIMARY KEY (owner_key, product_id)
);

Информация по товару
CREATE TABLE product_by_id (
    product_id text,
    name text,
    category_id text,
    price decimal,
    attrs map<text,text>,
    PRIMARY KEY (product_id)
);

Товары по категории
CREATE TABLE products_by_category (
    category_id text,
    price decimal,
    product_id text,
    name text,
    PRIMARY KEY (category_id, price, product_id)
) WITH CLUSTERING ORDER BY (price ASC);
